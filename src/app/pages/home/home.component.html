<div class="home-container">
  <section class="hero-section">
    <h1>Manage Your Samiti Digitally</h1>
    <p>Apne Mandal ya Group ka hisaab-kitaab rakhein ekdam asaan aur transparent.</p>
    <div class="hero-actions">
      <button mat-raised-button color="primary" (click)="onCreateSamiti()">
        <mat-icon>add</mat-icon> CREATE NEW SAMITI
      </button>
      <button mat-stroked-button class="hero-secondary-btn">
        <mat-icon>search</mat-icon> FIND NEARBY GROUP
      </button>
    </div>
  </section>
  <hr class="section-divider">
  <div class="home-container">
    <section class="near-you-section">
      <h2>Explore Active Events</h2>

      <div class="group-grid">


        <mat-card class="group-card" *ngFor="let group of samitiGroups">
          <mat-card-header>
            <img mat-card-avatar [src]="getGroupLogoUrl(group.name)" class="group-logo" alt="{{group.name}}">
            <mat-card-title class="clickable-title" (click)="openGroupProfile(group)">{{ group.name }}</mat-card-title>
            <mat-card-subtitle class="group-meta-wrapper">
              <!-- Location Link -->
              <div class="meta-row location-row" (click)="$event.stopPropagation(); openMap(group.location)" title="Open in Maps">
                <mat-icon class="meta-icon">place</mat-icon>
                <span class="location-text">{{ group.location }}</span>
                <mat-icon class="link-arrow">open_in_new</mat-icon>
              </div>

              <!-- Stats Info -->
              <div class="meta-row stats-row">
                <span class="stat-item" title="Established Date">
                  <mat-icon class="meta-icon tiny">verified_user</mat-icon>
                  Est. {{ group.since }}
                </span>
                <span class="stat-divider">|</span>
                <span class="stat-item" title="Events Count">
                  <mat-icon class="meta-icon tiny">event_note</mat-icon>
                  {{ group.events.length }} Events
                </span>
              </div>
            </mat-card-subtitle>
            
            <button mat-stroked-button class="card-join-btn" (click)="$event.stopPropagation(); openJoinGroupDialog(group)">
              <mat-icon>group_add</mat-icon> JOIN
            </button>
          </mat-card-header>

          <mat-card-content>
            <div class="event-list">
              <div class="event-item" *ngFor="let event of group.events" [attr.data-status]="event.status">
                <div class="event-info">
                  <div class="event-title">
                    <span>{{ event.title }}</span>
                    <span class="year-count-badge" *ngIf="event.year_count">{{ getYearLabel(event.year_count) }}</span>
                  </div>
                  <span class="event-dates">
                    <mat-icon class="small-icon calendar-icon">calendar_today</mat-icon>
                    {{ event.start_date | date:'mediumDate' }} - {{ event.end_date | date:'mediumDate' }}
                  </span>
                  <span class="event-dates clickable-location" *ngIf="event.location" (click)="openMap(event.location)" title="View on Map">
                    <mat-icon class="small-icon location-icon">location_on</mat-icon>
                    {{ event.location }}
                  </span>

                  <div class="event-footer">
                    <span class="event-status-text" [attr.data-status]="event.status">
                      {{ event.status | titlecase }}
                    </span>
                    <span class="view-details-link" (click)="openEventDetails(event)" title="View Details">
                      <mat-icon class="arrow-icon">arrow_forward</mat-icon>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </section>
  </div>
</div>